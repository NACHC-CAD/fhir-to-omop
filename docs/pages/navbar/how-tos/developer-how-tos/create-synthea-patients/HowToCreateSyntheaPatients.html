<html>
	
	<head>
		<!-- favicon link -->
		<link rel="shortcut icon" type="image/x-icon" href="../../../../../favicon.ico">
		<!-- include lib code -->
		<script src="../../../../../site_libs/jquery-1.11.3/jquery.min.js"></script>
		<div id="headerInclude"></div>
		<script>$("#headerInclude").load("/fhir-to-omop/header.html");</script>
	</head>

	<body>
		<div class="container-fluid main-container">

			<!-- navbar -->
			<div id="navbarInclude"></div>
			<script>$("#navbarInclude").load("/fhir-to-omop/navbar.html");</script>

			<h1>How to Generate Synthea Patients</h1>
			
			<h2>Introduction</h2>
			<p>
				This page will show how to create a set of synthetic patients using synthea.  
				This was needed for our hiv-cds work as the SynthicMass data set did not have any patients with HIV tests.  
				This guide is based on the guide provided by the Synthea project at 
				<a href="https://github.com/synthetichealth/synthea/wiki/Developer-Setup-and-Running">
					https://github.com/synthetichealth/synthea/wiki/Developer-Setup-and-Running
				</a>			
			</p>
			
			<h2>How to Generate Synthea Paients</h2>
			Checkout the Synthe project from 
			<a href="https://github.com/synthetichealth/synthea.git">
				https://github.com/synthetichealth/synthea.git 
			</a> 
			using git clone as shown below and then run the commands shown below.   
<pre class="preformatted">
git clone https://github.com/synthetichealth/synthea.git 
cd synthea
gradlew.bat compileJava
run_synthea
run_synthea -p 10000 Massachusetts
</pre>
			The above was run using Java 11.0.11:<br/>
			java version "11.0.11" 2021-04-20 LTS<br/>
			Java(TM) SE Runtime Environment 18.9 (build 11.0.11+9-LTS-194)<br/>
			Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.11+9-LTS-194, mixed mode)<br/>
			
			<br/>
			
			Once the process has run we can switch to the synthea/output/fhir directory 
			and the use something like the grep command below to see patients with hiv tests.  
			
<pre class="pre-scrollable">grep -ri hiv | grep -i test</pre>

<pre class="pre-scrollable">

gresh@LAPTOP-K0O3MVMP /cygdrive/c/_YES/workspace/synthea/output/fhir
$ grep -ri hiv | grep -i test
Glenn0_Hermiston71_d7e5852a-974c-6d45-f81d-5a87bbd05d2a.json:          "display": "HIV 1 and 2 tests - Meaningful Use set"
Glenn0_Hermiston71_d7e5852a-974c-6d45-f81d-5a87bbd05d2a.json:        "text": "HIV 1 and 2 tests - Meaningful Use set"
Glenn0_Hermiston71_d7e5852a-974c-6d45-f81d-5a87bbd05d2a.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Glenn0_Hermiston71_d7e5852a-974c-6d45-f81d-5a87bbd05d2a.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Glenn0_Hermiston71_d7e5852a-974c-6d45-f81d-5a87bbd05d2a.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Glenn0_Hermiston71_d7e5852a-974c-6d45-f81d-5a87bbd05d2a.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Sidney996_Klein929_6dd1e703-704f-0b99-196a-c4b17379326f.json:          "display": "HIV 1 and 2 tests - Meaningful Use set"
Sidney996_Klein929_6dd1e703-704f-0b99-196a-c4b17379326f.json:        "text": "HIV 1 and 2 tests - Meaningful Use set"
Sidney996_Klein929_6dd1e703-704f-0b99-196a-c4b17379326f.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Sidney996_Klein929_6dd1e703-704f-0b99-196a-c4b17379326f.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Sidney996_Klein929_6dd1e703-704f-0b99-196a-c4b17379326f.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Sidney996_Klein929_6dd1e703-704f-0b99-196a-c4b17379326f.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Teodoro374_Valadez233_5282879f-0fc4-02f5-be13-8b5da5481a06.json:          "display": "HIV 1 and 2 tests - Meaningful Use set"
Teodoro374_Valadez233_5282879f-0fc4-02f5-be13-8b5da5481a06.json:        "text": "HIV 1 and 2 tests - Meaningful Use set"
Teodoro374_Valadez233_5282879f-0fc4-02f5-be13-8b5da5481a06.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Teodoro374_Valadez233_5282879f-0fc4-02f5-be13-8b5da5481a06.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Teodoro374_Valadez233_5282879f-0fc4-02f5-be13-8b5da5481a06.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Teodoro374_Valadez233_5282879f-0fc4-02f5-be13-8b5da5481a06.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Korey682_Parisian75_371719e2-2d52-9202-4fc4-cb01eac3e1e0.json:          "display": "HIV 1 and 2 tests - Meaningful Use set"
Korey682_Parisian75_371719e2-2d52-9202-4fc4-cb01eac3e1e0.json:        "text": "HIV 1 and 2 tests - Meaningful Use set"
Korey682_Parisian75_371719e2-2d52-9202-4fc4-cb01eac3e1e0.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Korey682_Parisian75_371719e2-2d52-9202-4fc4-cb01eac3e1e0.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Korey682_Parisian75_371719e2-2d52-9202-4fc4-cb01eac3e1e0.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Korey682_Parisian75_371719e2-2d52-9202-4fc4-cb01eac3e1e0.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Asa127_Schroeder447_830373f4-cdad-34f3-6eed-7f7a62eecfd0.json:          "display": "HIV 1 and 2 tests - Meaningful Use set"
Asa127_Schroeder447_830373f4-cdad-34f3-6eed-7f7a62eecfd0.json:        "text": "HIV 1 and 2 tests - Meaningful Use set"
Asa127_Schroeder447_830373f4-cdad-34f3-6eed-7f7a62eecfd0.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Asa127_Schroeder447_830373f4-cdad-34f3-6eed-7f7a62eecfd0.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Asa127_Schroeder447_830373f4-cdad-34f3-6eed-7f7a62eecfd0.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Asa127_Schroeder447_830373f4-cdad-34f3-6eed-7f7a62eecfd0.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Cristopher265_King743_a65d9fca-cb45-9a38-25d9-e930ba87a43c.json:          "display": "HIV 1 and 2 tests - Meaningful Use set"
Cristopher265_King743_a65d9fca-cb45-9a38-25d9-e930ba87a43c.json:        "text": "HIV 1 and 2 tests - Meaningful Use set"
Cristopher265_King743_a65d9fca-cb45-9a38-25d9-e930ba87a43c.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Cristopher265_King743_a65d9fca-cb45-9a38-25d9-e930ba87a43c.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Cristopher265_King743_a65d9fca-cb45-9a38-25d9-e930ba87a43c.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Cristopher265_King743_a65d9fca-cb45-9a38-25d9-e930ba87a43c.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Leland44_Becker968_c8fcc072-1077-0bb1-e0c4-50c522f72f16.json:          "display": "HIV 1 and 2 tests - Meaningful Use set"
Leland44_Becker968_c8fcc072-1077-0bb1-e0c4-50c522f72f16.json:        "text": "HIV 1 and 2 tests - Meaningful Use set"
Leland44_Becker968_c8fcc072-1077-0bb1-e0c4-50c522f72f16.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Leland44_Becker968_c8fcc072-1077-0bb1-e0c4-50c522f72f16.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Leland44_Becker968_c8fcc072-1077-0bb1-e0c4-50c522f72f16.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Leland44_Becker968_c8fcc072-1077-0bb1-e0c4-50c522f72f16.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Fermin479_Bednar518_c5312ee3-530f-f2f0-23b8-3a364f9ecfff.json:          "display": "HIV 1 and 2 tests - Meaningful Use set"
Fermin479_Bednar518_c5312ee3-530f-f2f0-23b8-3a364f9ecfff.json:        "text": "HIV 1 and 2 tests - Meaningful Use set"
Fermin479_Bednar518_c5312ee3-530f-f2f0-23b8-3a364f9ecfff.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Fermin479_Bednar518_c5312ee3-530f-f2f0-23b8-3a364f9ecfff.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Fermin479_Bednar518_c5312ee3-530f-f2f0-23b8-3a364f9ecfff.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Fermin479_Bednar518_c5312ee3-530f-f2f0-23b8-3a364f9ecfff.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Dolores502_Romo23_17a10830-69fa-f8eb-d299-deb9f7e0c9c2.json:          "display": "HIV 1 and 2 tests - Meaningful Use set"
Dolores502_Romo23_17a10830-69fa-f8eb-d299-deb9f7e0c9c2.json:        "text": "HIV 1 and 2 tests - Meaningful Use set"
Dolores502_Romo23_17a10830-69fa-f8eb-d299-deb9f7e0c9c2.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Dolores502_Romo23_17a10830-69fa-f8eb-d299-deb9f7e0c9c2.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Dolores502_Romo23_17a10830-69fa-f8eb-d299-deb9f7e0c9c2.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Dolores502_Romo23_17a10830-69fa-f8eb-d299-deb9f7e0c9c2.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Geoffrey157_Daugherty69_7c145858-42ef-107e-851c-911fb436a7c3.json:          "display": "HIV 1 and 2 tests - Meaningful Use set"
Geoffrey157_Daugherty69_7c145858-42ef-107e-851c-911fb436a7c3.json:        "text": "HIV 1 and 2 tests - Meaningful Use set"
Geoffrey157_Daugherty69_7c145858-42ef-107e-851c-911fb436a7c3.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Geoffrey157_Daugherty69_7c145858-42ef-107e-851c-911fb436a7c3.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Geoffrey157_Daugherty69_7c145858-42ef-107e-851c-911fb436a7c3.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Geoffrey157_Daugherty69_7c145858-42ef-107e-851c-911fb436a7c3.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Fernande593_Littel644_1d06124a-c2f7-eeee-90ab-e7d71bd8c9ad.json:          "display": "HIV 1 and 2 tests - Meaningful Use set"
Fernande593_Littel644_1d06124a-c2f7-eeee-90ab-e7d71bd8c9ad.json:        "text": "HIV 1 and 2 tests - Meaningful Use set"
Fernande593_Littel644_1d06124a-c2f7-eeee-90ab-e7d71bd8c9ad.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Fernande593_Littel644_1d06124a-c2f7-eeee-90ab-e7d71bd8c9ad.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Fernande593_Littel644_1d06124a-c2f7-eeee-90ab-e7d71bd8c9ad.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Fernande593_Littel644_1d06124a-c2f7-eeee-90ab-e7d71bd8c9ad.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Coy949_Berge125_fbfc7ee6-44ab-43a1-52a7-95390fa1bec7.json:          "display": "HIV 1 and 2 tests - Meaningful Use set"
Coy949_Berge125_fbfc7ee6-44ab-43a1-52a7-95390fa1bec7.json:        "text": "HIV 1 and 2 tests - Meaningful Use set"
Coy949_Berge125_fbfc7ee6-44ab-43a1-52a7-95390fa1bec7.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Coy949_Berge125_fbfc7ee6-44ab-43a1-52a7-95390fa1bec7.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Coy949_Berge125_fbfc7ee6-44ab-43a1-52a7-95390fa1bec7.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Coy949_Berge125_fbfc7ee6-44ab-43a1-52a7-95390fa1bec7.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Elroy493_Connelly992_ce0437de-179f-488b-da8f-4d7a082a96ff.json:          "display": "HIV 1 and 2 tests - Meaningful Use set"
Elroy493_Connelly992_ce0437de-179f-488b-da8f-4d7a082a96ff.json:        "text": "HIV 1 and 2 tests - Meaningful Use set"
Elroy493_Connelly992_ce0437de-179f-488b-da8f-4d7a082a96ff.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Elroy493_Connelly992_ce0437de-179f-488b-da8f-4d7a082a96ff.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Elroy493_Connelly992_ce0437de-179f-488b-da8f-4d7a082a96ff.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Elroy493_Connelly992_ce0437de-179f-488b-da8f-4d7a082a96ff.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Lance203_Connelly992_e3363978-5636-72d9-6a8d-38b85fd2a6ae.json:          "display": "HIV 1 and 2 tests - Meaningful Use set"
Lance203_Connelly992_e3363978-5636-72d9-6a8d-38b85fd2a6ae.json:        "text": "HIV 1 and 2 tests - Meaningful Use set"
Lance203_Connelly992_e3363978-5636-72d9-6a8d-38b85fd2a6ae.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Lance203_Connelly992_e3363978-5636-72d9-6a8d-38b85fd2a6ae.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Lance203_Connelly992_e3363978-5636-72d9-6a8d-38b85fd2a6ae.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Lance203_Connelly992_e3363978-5636-72d9-6a8d-38b85fd2a6ae.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Chet188_Ledner144_84010bde-97f7-7a9a-da52-400e24b38007.json:          "display": "HIV 1 and 2 tests - Meaningful Use set"
Chet188_Ledner144_84010bde-97f7-7a9a-da52-400e24b38007.json:        "text": "HIV 1 and 2 tests - Meaningful Use set"
Chet188_Ledner144_84010bde-97f7-7a9a-da52-400e24b38007.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Chet188_Ledner144_84010bde-97f7-7a9a-da52-400e24b38007.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"
Chet188_Ledner144_84010bde-97f7-7a9a-da52-400e24b38007.json:            "display": "HIV 1 and 2 tests - Meaningful Use set"
Chet188_Ledner144_84010bde-97f7-7a9a-da52-400e24b38007.json:          "text": "HIV 1 and 2 tests - Meaningful Use set"

gresh@LAPTOP-K0O3MVMP /cygdrive/c/_YES/workspace/synthea/output/fhir
$
</pre>

		An example of a patient with an hiv test can be found 
		<a href="./img/Glenn0_Hermiston71_d7e5852a-974c-6d45-f81d-5a87bbd05d2a.json">
			here
		</a>.  
		<br/><br/>
		
		A zip file containing all of the patients created by this process can be downloaded from the 
		<a download href="https://drive.google.com/drive/folders/1kvBO-uno4I-GBFMHoZ9hZVTcEZiMQS4b">
			patients-with-hiv-tests 
		</a> on our Google Drive.  
			
		We can also observe that our test patient contains a resource with the code 75622-1
		as shown below.  
<pre class="pre-scrollable">
    "resource": {
      "resourceType": "DiagnosticReport",
      "id": "1000c0a2-a22c-22d3-f1f6-27f14acce6ff",
      "meta": {
        "profile": [ "http://hl7.org/fhir/us/core/StructureDefinition/us-core-diagnosticreport-lab" ]
      },
      "status": "final",
      "category": [ {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/v2-0074",
          "code": "LAB",
          "display": "Laboratory"
        } ]
      } ],
      "code": {
        "coding": [ {
          "system": "http://loinc.org",
          "code": "75622-1",
          "display": "HIV 1 and 2 tests - Meaningful Use set"
        } ],
        "text": "HIV 1 and 2 tests - Meaningful Use set"
      },
      "subject": {
        "reference": "urn:uuid:d7e5852a-974c-6d45-f81d-5a87bbd05d2a"
      },
      "encounter": {
        "reference": "urn:uuid:5f39cae4-aeaf-27f3-d2e4-a2761ebbbf73"
      },
      "effectiveDateTime": "1990-01-03T17:02:56-05:00",
      "issued": "1990-01-03T17:02:56.296-05:00",
      "performer": [ {
        "reference": "Organization?identifier=https://github.com/synthetichealth/synthea|3bd5eda0-16da-3ba5-8500-4dfd6ae118b8",
        "display": "NORWOOD HOSPITAL"
      } ],
      "result": [ {
        "reference": "urn:uuid:1df74fd9-1148-4b45-9910-6eda4ca41395",
        "display": "HIV 1 Ab [Presence] in Serum"
      } ]
    },
</pre>	
			
			We can then observe that this code (75622-1) can be found in the ValueSet resources 
			<ul>
				<li>
					valueset-nachc-a2-de1-codes-grouper.json
					<br/>
					(HIVTestCodesGrouper)
				</li>
				<li>
					valueset-nachc-a2-de2.json
					<br/>
					(HIV1HIV2AbAgtestsCodes)
				</li>
			</ul>	
			
			These resources are available from the hiv-cds project 
			<a href="https://github.com/cqframework/hiv-cds/tree/master/input/vocabulary/valueset/generated">
				here
			</a> 
			
			and a copy of these resources are available as part of the smart-on-fhir application available 
			<a href="https://github.com/NACHC-CAD/smart-on-fhir-examples/tree/main/docs/_ETC/hiv-cds/vocabulary/valueset/generated">
				here 
			</a>.
			
			
		</div>
	</body>
</html>

