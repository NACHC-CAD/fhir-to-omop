<html>
	
	<head>
		<!-- favicon link -->
		<link rel="shortcut icon" type="image/x-icon" href="../../../../favicon.ico">
		<!-- include lib code -->
		<script src="../../../../site_libs/jquery-1.11.3/jquery.min.js"></script>
		<div id="headerInclude"></div>
		<script>$("#headerInclude").load("/fhir-to-omop/header.html");</script>
	</head>

	<body>
		<div class="container-fluid main-container">

			<!-- navbar -->
			<div id="navbarInclude"></div>
			<script>$("#navbarInclude").load("/fhir-to-omop/navbar.html");</script>
			<h1 align="center">
				Ponos Quick Start Guide: An Automated Build for a Standardized Atlas Development Environment
			</h1>
			
			<h3>Introduction</h3>
			
			<p>
				This page gives links to each of the steps required to do a from-scratch build of a complete Atlas development environment.  
				Each step has links to more detailed instruction where appropriate.  
				Each step has links to what is actually done by each step where appropriate. 
				These what-is-actually-done pages also include links to scripts, source code, and other resources.  
				These resources can be used to see exactly what each step is doing.  
				A summary of what each step does is given at the end of this page.  
			</p>

			<h3>Quick Start Guide</h3>
			Perform each of the steps below to create your instance of the Ponos development environment.  
			<ul>
				<li>
					<b>Provision a machine for your installation</b>
					<br/>
					We will be using an AWS EC2 instance for our installation.  
					This process should work on any modern Windows machine.  
					By creating a new AWS EC2 instance we ensure that our process has not benefited from existing resources that were installed elsewhere.  
					<br/>
					<i>Detailed Instructions:</i> 
					<a href="./ponos/create-ec2-instance/CreateAwsEc2Instance.html">Detailed Instructions for Creating a New AWS EC2 Instance</a>
				</li>
				<li>
					<b>Download and Install the basic tools needed for Java development</b>  
					<br/>
					<a href="https://drive.google.com/drive/folders/1txmjzHY4B-W0A5VkdF3soBLWNKqoChwS">Download the _YES installer</a>
					<br/>
					Download and run this installer to get your basic development tools including things like 
					Java, MVN, Git, Eclipse, etc.  
					<br/>
					<i>Detailed Instructions:</i>
					<a href="./ponos/install-yes/InstallYes.html">Detailed Instructions for Downloading and installing the _YES development environment</a>
				</li>
				<li>
					<b>Install R Components Using Standard Installers</b>
					<br/>
					<a href="https://drive.google.com/drive/folders/1DEEB-RxSs7FSbRb0xfYvf2hBHgyMuKrI?usp=share_link">Download the R Installers</a>
					<br/>
					Download the zip file that contains the R installers using the link above.  
					Unzip the zip file and run each of the installers in the order of R for Windows, RTools, RStudio.  
					<br/>
					<i>Detailed Instructions:</i>
					<a href="./ponos/install-r/InstallR.html">Detailed Instructions for Installing the R components</a>
				</li>
				<li>
					<b>Install NPM</b>
					<br/>
					The NPM installer is included with the _YES install.  
					<br/>
					It is loacated at C:\_YES\tools\npm
					<br/>
					Run the installer and accept all of the defaults.  
					<br/>
					<i>Detailed Instructions:</i>
					<a href="./ponos/install-npm/InstallNpm.html">Detailed Instructions for Installing NPM</a>
				</li>
				<li>
					<b>Install PostgreSQL</b>
					<br/>
					The PostgreSQL installer is included with the _YES install.  
					<br/>
					It is located at C:\_YES\databases\postgres
					<br/>
					Run the installer and accept all of the defaults. 
					<br/>
					EXCEPT: Unclick the option for "Stack Builder"  
					<br/>
					<i>Detailed Instructions:</i>
					<a href="./ponos/install-postgres/InstallPostgres.html">Detailed Instructions for Installing PostgreSQL</a>
				</li>
				<li>
					<b>Install, Build, and deploy the WebAPI, Atlas, and fhir-to-omop projects</b>
					<br/>
					<a download href="/fhir-to-omop/ohdsi-tools/atlas/install-atlas-projects.bat">Download the install-atlas-project.bat file</a>
					<br/>
					Download the install-atlas-project.bat file.  
					<br/>
					Move this file to C:\_YES\workspace.
					<br/>
					Run this bat file from a cmd prompt.  
				</li>
				<li>
					<b>Create Everything Needed to Initialize Your Environment using the fhir-to-omop atlas tool</b>
					<br/>
					From a cmd prompt, navigate to C:\_YES\workspaces\fhir-to-omop\target\fhir-to-omop.  
					<br/>
					Run the following:
					<br/>
					fhir-to-omop.bat atlas
				</li>
				<li>
					<b>Download the Terminology files used for this build</b>
					<br/>
					<a href="https://drive.google.com/drive/folders/1ldsE5bylMcU2Q0TWw3Cra97giSFqhZDH?usp=share_link">Download Terminology</a>
					<br/>
					Use the above link to download the zip file of the terminologies used for this build. 
					<br/>
					Move this file to C:\_YES\tools\terminology\fhir-to-omop\for-testing.
				</li>
				<li>
					<b>Populate the CDM with test data using ETL-Synthea</b>
					<br/>
					<a download href="/fhir-to-omop/ohdsi-tools/synthea-etl/synthea-etl.R">Download the synthea-etl.R script</a>
					<br/>
					Use the above link to download the synthea-etl.R script.  
					<br/>
					Open the script in RStudio. Wait a moment and a very small link will appear at the top of the RStudio screen.  
					<br/>
					SELECT THE INSTALL OPTION! 
					If you don't, things will go awry.  
				</li>
				<li>
					<b>Run Achilles</b>
					Download the three R scripts listed below and run them in the order shown here.  
					<ul>
						<li>
							<a download href="/fhir-to-omop/ohdsi-tools/achilles/r-scripts/install-achilles.r">install-achilles.r</a>
						</li>
						<li>
							<a download href="/fhir-to-omop/ohdsi-tools/achilles/r-scripts/init-params-achilles.r">init-params-achilles.r</a>
						</li>
						<li>
							<a download href="/fhir-to-omop/ohdsi-tools/achilles/r-scripts/run-achilles.r">run-achilles.r</a>
						</li>
					</ul>
				</li>
				<li>
					<b>Start Tomcat and Launch Atlas</b>
					<br/>
					And we're done!<br/>
					Navigate to C:\_YES\servers\apache-tomcat\apache-tomcat-8.5.85-windows-x64\apache-tomcat-8.5.85\bin
					<br/>
					Run the following, wait a few moments for Tomcat to start, and then open Atlas in a browser using 
					<a href="http://localhost:8080/atlas">http://localhost:8080/atlas</a>  
					<br/>
					catalina.bat start
					<br/>
				</li>
			</ul>

			<h3>Summary of the Ponos process</h3>

			<p>
				Ponos automates the build of an environment that can be used to run and develop Atlas as much as is possible.  
				The Ponos automated build consists of the following steps. 
				Each of the steps can be run individually as needed.  
				All of the steps can be run to create a complete installation of Atlas 
				and the tools needed for Atlas development.  
				<ul>
					<li>
						<b>Download and Install the basic tools needed for Java development</b>  
						<br/>
						An NSIS Windows installer is provided that can be run to install everything needed for basic Java/Web development.  
						This installer builds the _YES (Yaorma Eclipse Setup) environment. 
						This includes the following
						<ul>
							<li>
								A Git client
							</li>	
							<li>
								Maven (MVN)
							</li>
							<li>
								Java 8 and Java 11
							</li>
								An Installer for NPM
							<li>
								An Installer for PostgreSQL
							</li>
							<li>
								The JDBC driver required for PostgreSQL
							</li>
							<li>
								An Apache Tomcat server
							</li>
							<li>
								A Wildfly server
							</li>
							<li>
								A configured instance of Eclipse that is pre-integrated with Tomcat and Wildfly
							</li>
							<li>
								This install will update your path environment variable to point to the correct version of Java for this work
							</li>
							<li>
								This install provides some .bat files for some common tasks such as changing the version of Java being used
							</li>
						</ul>
					</li>
					<li>
						<b>Install R Components Using Standard Installers</b>
						<br/>
						Installers for R are provided.  
						By using these version of the installers we can be assured the we have all of the correct versions. 
						These installers include the following
						<ul>
							<li>
								R for Windows
							</li>
							<li>
								RTools
							</li>
							<li>
								RStudio
							</li>
						</ul>
					</li>
					<li>
						<b>Install NPM</b>
						<br/>
						NPM needs to be installed. 
						This is done using the standardized installer provided when the basic tools (_YES) were down loaded in step 1 above.  
					</li>
					<li>
						<b>Install PostgreSQL</b>
						<br/>
						PostgreSQL is installed using the standard installer provided when the basic tools (_YES) were down loaded in step 1 above. 
					</li>
					<li>
						<b>Install, Build, and deploy the WebAPI, Atlas, and fhir-to-omop projects</b>
						<br/>
						A script is provided that will clone, checkout to a common version, and build the following.  
						This process also deploys WebAPI and Atlas to our common instance of Tomcat.  
						<ul>
							<li>Atlas</li>
							<li>WebAPI</li>
							<li>fhir-to-omop</li>
						</ul>
					</li>
					<li>
						<b>Create Everything Needed to Initialize Your Environment using the fhir-to-omop atlas tool</b>
						<br/>
						All of the steps required to set up the databases, users, etc. for Atlas have been automated 
						and can be run using the fhir-to-omop atlas tool.  
						This includes the following
						<ul>
							<li>
								Clean up (deleting) the old environment
							</li>
							<li>
								Create the Atlas database users
							</li>
							<li>
								Create the WebAPI schema
							</li>
							<li>
								Create the WebAPI schema tables
							</li>
							<li>
								Create the Achilles schemas
							</li>
							<li>
								Create the Achilles schema tables
							</li>
							<li>
								Grant all required privileges
							</li>
							<li>
								Create Atlas source records in the webapi scheam
							</li>
							<li>
								Create an instance of the Common Data Model (CDM)
							</li>
							<li>
								Create the Synthea native schema (the ETL-synthea tool is used to populate the CDM with test data)
							</li>
						</ul>
					</li>
					<li>
						<b>Populate the CDM with test data using ETL-Synthea</b>
						<br/>
						Preconfigured R scripts that run out of the box are provided.  
						These scripts are used to populate our instance of the CDM with test data.   
					</li>
					<li>
						<b>Run Achilles</b>
						<br/>
						Preconfigured R scripts that run out of the box are provided.  
						These scripts run Achilles to populate our CDM with required data.  
					</li>
					<li>
						<b>Start Tomcat and Launch Atlas</b>
						<br/>
						At this point we have done everything needed to run Atlas.  
						We can now start our instance of Tomcat and start Atlas in a web browser.  
					</li>
				</ul> 
			</p>

		</div>
	</body>
	
</html>