<html>
	
	<head>
		<!-- favicon link -->
		<link rel="shortcut icon" type="image/x-icon" href="../../../../favicon.ico">
		<!-- include lib code -->
		<script src="../../../../site_libs/jquery-1.11.3/jquery.min.js"></script>
		<div id="headerInclude"></div>
		<script>$("#headerInclude").load("/fhir-to-omop/header.html");</script>
	</head>

	<body>
		<div class="container-fluid main-container">

			<!-- navbar -->
			<div id="navbarInclude"></div>
			<script>$("#navbarInclude").load("/fhir-to-omop/navbar.html");</script>

			<h1>Start Here: Installation of Atlas, WebAPI, CDM, webapi, and Required Prerequisites</h1>
			<p>
				This page provided a link to the Ponos installation of Atlas/WebAPI/CDM and a summary of this process.  
				This page also details the steps to manually install all of the prerequisites for Atlas/WebAPI and then install Atlas/WebAPI.  
				The manual process is fairly complicated and not recommended but is included here for reference.  
				It is recommended to use the Ponos install process described at the link below.  
			</p>
			
			<h3>
				<a href="./Ponos.html">Ponos: An Automated Build for an OHDSI Development or Production Environment</a>
			</h3>
			Click on this link for the <a href="./Ponos.html">Ponos Installation Process</a>.
			<br/>
			Click on this link for <a href="https://www.youtube.com/watch?v=sICrvy0xZek&vq=hd1080p">a video demonstration of a Ponos install</a>
			<br/>
			(Set the video quality to HD/1080 if the video quality is not good, the link from this page should do it for you)

			<h3>
			
			</h3>
			
			<h3>
				An Overview of Ponos
			</h3>

			Ponos does a complete installation of Atlas, WebAPI, CDM, the webapi database, and all dependencies in 5 easy steps.  
			<ul>
				<li>
					<b>Step 1:</b> Provision a machine to host Atlas/WebAPI/CDM/etc.
				</li>
				<li>
					<b>Step 2:</b> Download and run the _YES Installer to intall basic Java development tools
				</li>
				<li>
					<b>Step 3:</b> Run Installers that have not been automated (there's only 3: NPM, RTools, and PostgreSQL
				</li>
				<li>
					<b>Step 4:</b> Run the installer for Atlas/WebAPI/fhir-to-omop to clone, build, and deploy the fhir-to-omop tool suite, WebAPI, and Atlas
				</li>
				<li>
					<b>Step 5:</b> Run the fhir-to-omop atlas tool to run all of the manuall processes described below to create the CDM, webapi databases and all other dependencies required for Atlas/WebAPI/etc.
				</li>
			</ul>

			<h3>
				An Brief Description of Each of the Steps of Ponos
			</h3>

			<p>
				Ponos automates the build of an environment that can be used to run and develop Atlas as much as is possible.  
				The Ponos automated build consists of the following steps. 
				Each of the steps can be run individually as needed.  
				All of the steps can be run to create a complete installation of Atlas 
				and the tools needed for Atlas development.  
			</p>

				<ul>
					<li>
						<b>Step 1: Provision a machine to host Atlas/WebAPI/CDM</b>
						<br/>
						We will need someplace to run our instance.  
						The documentation for this project includes the set up of a brand new AWS EC2 Windows machine.  
						This brand new Windows box is used as the starting point for a demonstration of a complete installation of Atlas/WebAPI/CDM with test data.  
					</li>
					<li>
						<b>Step 2: Download and run the _YES Installer</b>
						<br/>
						This installer installs most of the software required to run Atlas/WebAPI and create a CDM and optionally populate it with test data.
						<ul>
							<li>
								A Git client
							</li>	
							<li>
								Maven (MVN)
							</li>
							<li>
								Java 8 and Java 11
							</li>
							<li>
								An Installer for NPM
							<li>
								An Installer for PostgreSQL
							</li>
							<li>
								The JDBC driver required for PostgreSQL
							</li>
							<li>
								An Apache Tomcat server
							</li>
							<li>
								A Wildfly server
							</li>
							<li>
								A configured instance of Eclipse that is pre-integrated with Tomcat and Wildfly
							</li>
							<li>
								An instance of R
							</li>
							<li>
								An installer for RTools
							</li>
							<li>
								This install will update your path environment variable to point to the correct version of Java for this work
							</li>
							<li>
								This install provides some .bat files for some common tasks such as changing the version of Java being used
							</li>
						</ul>					
					</li>
					<li>
						<b>Step 3: Run Installers that have not been automated</b>
						<br/>
						For various reasons, the installers listed below have not been included in the automated process.  
						<ul>
							<li>
								Node Package Manager (NPM): This is used by the Atlas/WebAPI install. <br/>
								This installer is included in the _YES distribution but needs to be run manually.  
							</li>						
							<li>
								PostgreSql: This is the database that we will use for the webapi and CDM databases. <br/>
								This installer is included in the _YES distribution but needs to be run manually.  
							</li>
							<li>
								RTools: <br/>
								RTools is used by Achilles.  
								The installer is over 4Gb and therefore not included in the _YES download (which is already big enough). 
								A link to a standard version used for this process is provided so every installation using this process has the same instance of RTools.   
							</li>
						</ul>
					</li>
					<li>
						<b>Step 4: Run the installer for Atlas/WebAPI/fhir-to-omop</b>
						<br/>
						This installer clones, checks out a specific version, and builds and deploys the Atlas, WebAPI, and fhir-to-omop applications from github.  
						The fhir-to-omop project contains the tool that is used to build our instance of CDM.  
					</li>
					<li>
						<b>Step 5: Run the fhir-to-omop atlas tool</b>
						<br/>
						This application builds a complete instance of CDM including
						<ul>
							<li>
								Clean up (deleting) the old environment
							</li>
							<li>
								Create the Atlas database users
							</li>
							<li>
								Create the WebAPI schema
							</li>
							<li>
								Create the WebAPI schema tables
							</li>
							<li>
								Create the Achilles schemas
							</li>
							<li>
								Create the Achilles schema tables
							</li>
							<li>
								Grant all required privileges
							</li>
							<li>
								Create Atlas source records in the webapi scheam
							</li>
							<li>
								Create an instance of the Common Data Model (CDM)
							</li>
							<li>
								Create the Synthea native schema (the ETL-synthea tool is used to populate the CDM with test data)
							</li>
							<li>
								Download and install a complete set of terminology tables from a standard source (alternatively, a custom terminology source can be specified and used)
							</li>
							<li>
								Install a complete test data set using ETL-Synthea
							</li>
							<li>
								Run Achilles to populate the Achilles Tables used by Atlas
							</li>
						</ul>
					</li>

				</ul>

			<h1>Manual Installation of Atlas, WebAPI, and Dependencies</h1>
			The existing process for installing Atlas, WebAPI, and the Dependencies is a manual process.  
			Instructions for this process spread accross many projects.  
			These instructions must be followed very carefully and executed in a specific order.  
			This process is very time consuming and very prone to error.  
			The manual process to install Atlas/WebAPI/etc. is defined by the resources listed below.  
			The Ponos process automates this process.  

			<br/><br/>
			
			<b>WebAPI Deployment: The following are the high-level steps for deploying WebAPI</b>
			<br/>
			Pre-requite software is listed here: 
			<br/>
			<a href="https://github.com/OHDSI/WebAPI/wiki/WebAPI-Installation-Guide">https://github.com/OHDSI/WebAPI/wiki/WebAPI-Installation-Guide</a>
			<br/>
			Install and configure a PostreSQL server, database and users for use when deploying WebAPI: 
			<br/>
			<a href="https://github.com/OHDSI/WebAPI/wiki/PostgreSQL-Installation-Guide.">https://github.com/OHDSI/WebAPI/wiki/PostgreSQL-Installation-Guide.</a>
			<br/>
			Verify the database connectivity: 
			<br/>
			<a href="https://github.com/OHDSI/WebAPI/wiki/WebAPI-Installation-Guide#test-the-database-connection">https://github.com/OHDSI/WebAPI/wiki/WebAPI-Installation-Guide#test-the-database-connection</a>
			<br/>
			Install WebAPI: 
			<br/>
			<a href="https://github.com/OHDSI/WebAPI/wiki/WebAPI-Installation-Guide#installing-webapi">https://github.com/OHDSI/WebAPI/wiki/WebAPI-Installation-Guide#installing-webapi</a>
			<br/>
			Deploy WebAPI to Tomcat: 
			<br/>
			<a href="https://github.com/OHDSI/WebAPI/wiki/WebAPI-Installation-Guide#deploy-webapi-to-tomcat">https://github.com/OHDSI/WebAPI/wiki/WebAPI-Installation-Guide#deploy-webapi-to-tomcat</a>
			<br/>
			Verify deployment: 
			<br/>
			<a href="https://github.com/OHDSI/WebAPI/wiki/WebAPI-Installation-Guide#verify-webapi-deployment">https://github.com/OHDSI/WebAPI/wiki/WebAPI-Installation-Guide#verify-webapi-deployment</a>
			<br/>
			Troubleshooting FAQ: 
			<br/>
			<a href="https://github.com/OHDSI/WebAPI/wiki/WebAPI-Installation-Guide#troubleshooting">https://github.com/OHDSI/WebAPI/wiki/WebAPI-Installation-Guide#troubleshooting</a>
			<br/>
			Configure the CDM for use with WebAPI: 
			<br/>
			<a href="https://github.com/OHDSI/WebAPI/wiki/CDM-Configuration">https://github.com/OHDSI/WebAPI/wiki/CDM-Configuration</a>
			<br/>
			<br/>
			<b>Atlas deployment</b>
			<br/>
			The ATLAS setup guide is found here: 
			<br/>
			<a href="https://github.com/OHDSI/Atlas/wiki/Atlas-Setup-Guide. The high level steps include:">https://github.com/OHDSI/Atlas/wiki/Atlas-Setup-Guide. The high level steps include:</a>
			<br/>
			Troubleshooting guide: 
			<br/>
			<a href="https://github.com/OHDSI/Atlas/wiki/Atlas-Setup-Guide#troubleshooting">https://github.com/OHDSI/Atlas/wiki/Atlas-Setup-Guide#troubleshooting</a>
			
			<!-- old version -->
			<h1>Manually Installing Dependencies and First Steps with fhir-to-omop Tools</h1>
			<h3>
				This section gives instructions on how to manually install some of the tools needed for WebAPI, Atlas, and fhir-to-omop.  
			</h3>
			
			<h3>Introduction</h3>
			<p>
				This section will show you the steps to install and get started with fhir-to-omop as a developer. 
				This section is retained as it was used to guide the development of the automated, and thereby standardized, 
				build of the WebAPI/Atlas/fhir-to-omop development environment. 
				You should really use the automated build described above.   
			</p>
			<p>
				Getting started with fhir-to-omop means different things to different users.  
				The fhir-to-omop project includes several tools including utilities to download FHIR resources from a FHIR server in a highly paralleized and scalable way, tools for converting FHIR to OMOP, tools for writing data to OMOP, as well as several other tools and utilities.  
				We suggest looking at the <a target="tools" href="/fhir-to-omop/pages/tools/fhir-to-omop-tools-and-utilities/FhirToOmopToolsAndUtilities.html">fhir-to-omop Tools and Utilities</a> page for the functionality you are interested in.  
			</p>
			
			<!-- prerequsites -->
			<h1>Prerequisites</h1>
			Don't panic, the list below are the prerequisites to get started as a developer on the fhir-to-omop team.  
			The fhir-to-omop tool suit is also available as a 
			<a href="/fhir-to-omop/pages/navbar/getting-started/list-of-tools/Standalone.html">Standalone Application</a>. The only prerequisites for the Standalone application are a MS Sql Server database, terminology files from Athena, and Java.  
			
			<h2>List of prerequisites</h2>
			<p style="color:red;">Note: A new UMLS licence can take up to 3 business days to process. Do this first ! ! !</p>
			<p>
				The following resources are required for the fhir-to-omop tool suite. Links to how to get each of these resources are shown in the next section.     
				<ol>
					<li>Java: fhir-to-omop is a suite of Java applications.</li>
					<li>Git: Git used to download fhir-to-omop</li>
					<li>Maven: MVN is used to build the project from source files</li>
					<li>
						MS Sql Server:
						An installation of Microsoft Sql Server used as the database to host the OMOP instance we will be creating, and a download of the terminology tables from <a target="athena" href="https://athena.ohdsi.org/vocabulary/list">OHDSI Athena</a>.
					</li>
					<li>
						It is also helpful to have Microsoft Sql Server Management Studio (MSSM) installed. 
					</li>
					<li>
						MS Sql Server JDBC Driver: Used by applications to connect to your OMOP instance.  
					</li>
					<li>
						Eclipse (or other IDE):
						It is also useful to have an integrated development environment (IDE).  
						I prefer <a target="eclipse" href="https://www.eclipse.org/">Eclipse</a> 
						(because I'm older than the mountains... at least I'm not using emaccs, because I'm younger than the trees).   
					</li>
					<li>An identity provider. I'm using secure.login.gov. Others such as Microsoft or Google (gmail) can also be used.  
					<li>A UMLS Account: Some of the terminologies used in OMOP require a UMLS account.  </li>
					<li>A UMLS API Key: This is required to integrate CPT codes after the terminology has been downloaded.  </li>
					<li>An OHDSI Athena account: Athena will be used to download the terminologies we will add to our OHDSI implementation</li>
					<li>A Synthea SyntheticMass Account and Application ID</li>
					<li>R and RStudio: R and RStudio are used for tools like the Data Quality Dashboard</li>
					<li>PostgreSql 10: PostgreSql 10 is required if you want to install an instance of Atlas (you definitely want to install an instance of Atlas)
				</ol>
				
				<h2>Links to Instructions on How to Get Prerequisites</h2>
				Instructions for each are in the pages shown below.
				<ul>
					<li><a target="java" href="/fhir-to-omop/pages/navbar/getting-started/start-here/InstallJava.html">Install Java</a></li>
					<li><a target="git" href="/fhir-to-omop/pages/navbar/getting-started/start-here/InstallGit.html">Install Git</a></li>
					<li><a target="mvn" href="./InstallMaven.html">Install Maven (MVN)</a>
					<li><a target="sqlServer" href="/fhir-to-omop/pages/navbar/getting-started/start-here/InstallMsSqlServer.html">Install Microsoft Sql Server</a></li>
					<li><a target="eclipse" href="/fhir-to-omop/pages/navbar/getting-started/start-here/InstallEclipse.html">Install Eclipse</a></li>
					<li><a target="usa" href="/fhir-to-omop/pages/navbar/getting-started/start-here/GetUsGovLogin.html">Get A secure.login.gov Account</a></li>
					<li><a target="umls" href="/fhir-to-omop/pages/navbar/getting-started/start-here/GetAUmlsAccount.html">Get UMLS Account</a></li>					
					<li><a target="umls-api" href="/fhir-to-omop/pages/navbar/getting-started/start-here/GetAUmlsApiKey.html">Get UMLS API Key</a></li>					
					<li><a target="athena" href="/fhir-to-omop/pages/navbar/getting-started/start-here/GetAthenaLogin.html">Get Athena Login</a></li>
					<li><a target="terminology" href="/fhir-to-omop/pages/navbar/getting-started/start-here/DownloadTerminology.html">Download the OMOP Terminology to be used for your OMOP instance</a></li>
					<li><a target="synthea" href="/fhir-to-omop/pages/navbar/getting-started/start-here/GetSyntheaAccount.html">Create a Synthea Account and Application ID</a></li>
					<li><a target="synthea" href="/fhir-to-omop/pages/navbar/getting-started/start-here/GetR.html">Install R and RStudio</a></li>
					<li><a target="postgresql" href="./GetPostgreSql.html">Install PostgreSql</a></li>
				</ul>
				<p>
					<h2>Versions</h2>
					The current version of fhir-to-omop has been built and tested using the following versions of the above tools:
					<ul>
						<li>Windows: Windows 10 Home version 21H2, OS Build 19044.1526, Experience Windows Feature Experience Pack 120.2212_4170.0</li>
						<li>Java: java version "1.8.0_261", Java(TM) SE Runtime Environment (build 1.8.0_261-b12), Java HotSpot(TM) 64-Bit Server VM (build 25.261-b12, mixed mode)
						<li>Git: git version 2.27.0.windows.1</li>
						<li>Maven: MVN version 3.8.5 installed from apache-maven-3.8.5-bin.zip.  
						<li>MS Sql Server (64 bit): Microsoft SQL Server 2019 (RTM-GDR) (KB4583458) - 15.0.2080.9 (X64)   Nov  6 2020 16:50:01   Copyright (C) 2019 Microsoft Corporation  Developer Edition (64-bit) on Windows 10 Home 10.0 <X64> (Build 19044: ) (Hypervisor) </li>
						<li>MS Sql Server Management Studio (SSMS): 15.0.18390.0</li>
						<li>MS Sql Server JDBC jar file: mssql-jdbc-10.2.0.jre8.jar</li>
						<li>Eclipse: Eclipse IDE for Enterprise Java and Web Developers (includes Incubating components), Version: 2021-09 (4.21.0), Build id: 20210910-1417, OS: Windows 10, v.10.0, x86_64 / win32, Java vendor: Oracle Corporation, Java runtime version: 16.0.2+7-67, Java version: 16.0.2</li>
						<li>OMOP Terminology: The versions downloaded are listed <a target="vocabularies" href="/fhir-to-omop/pages/navbar/getting-started/start-here/Vocabularies.html" >here</a></li>
						<li>R: R was installed from rtools40-x86_64.exe</li>
						<li>RStudio: RStudio was installed from RStudio-1.4.1103.exe</li>
						<li>PostgreSql: PostgreSql was installed from PostgreSql 10.21-1.  
					</ul>
				</p>
			</p>			
			
			<h1>Download and Install fhir-to-omop</h1>
			<p>
				The fhir-to-omop tools can be downloaded and installed by simply checking out the fhir-to-omop project from github using the following.
				<br/>
				<code>git clone https://github.com/NACHC-CAD/fhir-to-omop</code>
				<br/><br/>
				Then switch to the tag you want to use as shown below (kind of, you definitely do NOT want the primordial branch)
				<br/>
				<code>git checkout tags/primordial</code>
				<br/><br/>
				<img src="/fhir-to-omop/pages/navbar/getting-started/start-here/git.png" />
				<br/><br/>
				This project uses tags like v0.0.0. You probably want the most recent tag.  
				You can find the most recent tag by going to 
				<a target="github" href="https://github.com/NACHC-CAD/fhir-to-omop">https://github.com/NACHC-CAD/fhir-to-omop</a> 
				and then selecting the <a target="github" href="https://github.com/NACHC-CAD/fhir-to-omop/tags">tag</a> link.  
				<br/>
				<img src="/fhir-to-omop/pages/navbar/getting-started/start-here/select-tag.png" />
			</p>
		</div>
	</body>

</html>