<html>
	
	<head>
		<!-- favicon link -->
		<link rel="shortcut icon" type="image/x-icon" href="../../../../favicon.ico">
		<!-- include lib code -->
		<script src="../../../../site_libs/jquery-1.11.3/jquery.min.js"></script>
		<div id="headerInclude"></div>
		<script>$("#headerInclude").load("/fhir-to-omop/header.html");</script>
	</head>

	<body>
		<div class="container-fluid main-container">

			<!-- navbar -->
			<div id="navbarInclude"></div>
			<script>$("#navbarInclude").load("/fhir-to-omop/navbar.html");</script>

			<!-- install sql server -->
			<h1>Install Microsoft Sql Server</h1>
			Follow the instructions at the link below to install a Microsoft Sql Server.
			Select the SQL Server on-premises option.  
			<br/>
			<a target="sqlserver" href="https://www.microsoft.com/en-us/evalcenter/download-sql-server-2019">https://www.microsoft.com/en-us/evalcenter/download-sql-server-2019</a> 
			<br/>
			<br/>
			<img width="800px" src="/fhir-to-omop/pages/navbar/getting-started/start-here/sqlserver/sqlserver-download.PNG" />             
			<br/>

			<!-- select insta SSMS option -->
			<br/>
			When the install is done, select install SSMS to install the Sql Server Management Studio (SSMS). 
			This is an application that can be used to directly interact with instances of Sql Server. 
			If you forget to do this install, you can follow the optional instructions below to install it directly. 
			<br/>
			<br/>
			<img width="400px" src="/fhir-to-omop/pages/navbar/getting-started/start-here/sqlserver/installDone.png" />             
			

			<!-- install ssms -->			
			<h1>Install Microsoft Sql Server Management Studio (SSMS)</h1>
			Follow the instructions at the link below to install a Microsoft Sql Server Management Studio.
			<br/>
			<a target="sqlserver" href="https://docs.microsoft.com/en-us/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-ver15">https://docs.microsoft.com/en-us/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-ver15</a> 
			<br/>
			<br/>
			<img width="800px" src="/fhir-to-omop/pages/navbar/getting-started/start-here/sqlserver/ssms-download.PNG" />             
			<br/>

			<!-- enable tcp/ip -->			
			<h1>Enable TCP/IP</h1>
			<p>
				Some (all/most?) installations of MS Sql Server do not enable TCP/IP connectivity by default.  
				This needs to be configured manually.  
				Do the following to activate TCP/IP connectivity for MS Sql Server.  
			</p>
			
			<h3>Start Sql Server Configuration Manager</h3>
			<img class="bordered" width="400px" src="./sqlserver/start-sql-server-config.JPG" />
			
			<h3>Enable TCP/IP</h3>
			TCP/IP connectivity can be enabled in the SQl Server Configuration Manager as shown below.
			
			<p>
				<img width="800px" src="./sqlserver/sql-server-enable-tcp-ip-show-port.JPG" />
			</p>			
			<h3>Check TCP/IP Port</h3>
			While we're here, we can check what port MS Sql Server is listening on (default is 1433).  
			Right click on "TCP/IP Enabled" and select "Properties" to display the TCP/IP Properties window shown below.  
			<p>
				<img width="800px" src="./sqlserver/port.png" />
			</p>			

			<h1>Enable Mixed Mode Authentication</h1>
			<p>
				By default, some installations of MS Sql Server have mixed mode authentication disabled.  
				To authenticate using a username/password (i.e. not using Windows authentication), mixed mode authentication needs to be enabled.  
				Enable mixed mode as shown below
			</p>

			<p>
			</p>
				Open Sql Server Management Studio (SSMS), select the server, then select Properties.  
			<p>
				<img src="./sqlserver/enable-mixed-mode/select-properties.jpg" />
			</p>
			<p>
			</p>
				<br/>
				Select Security, then select the radio button for "SQL Server and Windows Authentication mode"
			<p>
				<img src="./sqlserver/enable-mixed-mode/set-security.jpg" />
			</p>
			<p>
			</p>
				<br/>
				Restart Sql Server: Open the Windows Services utility and restart the Sql Server service.  
			<p>
				<img src="./sqlserver/enable-mixed-mode/restart.JPG" />
			</p>

			<!-- jdbc driver -->
			<h1>Download the MS Sql Server JDBC Driver</h1>
			The MS Sql Server JDBC Driver jar file can be downloaded from Microsoft <a href="https://docs.microsoft.com/en-us/sql/connect/jdbc/release-notes-for-the-jdbc-driver">here</a>.  
			<img width="800px" src="/fhir-to-omop/pages/navbar/getting-started/start-here/sqlserver/download-jdbc-driver.png" />             


			<!-- dlls for jdbc -->
			<h1>Install DLLs for Microsoft Sql Server JDBC Connectivity</h1>
			<p>
				For some reason Microsoft requires the installation of custom DLLs for JDBC to work. 
				<br/>
				<font color="red">
				Note that the versions of the DLL and the JDBC jar need to match. 
				There are specific versions for JRE versions (JRE 11, JRE 8, etc.). 
				The drivers for these versions are marked as 11.2.2.jre11, 11.2.2.jre8, etc.  
				</font>
				You may need to modify the pom.xml file of your application to use the correct version of the driver for your database version. 
			</p>
			<p>
				The DLLs can be found in the zip file we downloaded for the JDBC Driver as shown below after the zip has been unzipped 
				(enu/auth/64 for the 64 bit version). 
			</p>
			<p>
				<img src="./sqlserver/dlls.png" />
			</p>
			<p>
				<br/>
				Move the dll to a permanent location and then add the location of the dll to your path as shown below. 
				Alternatively you can move the dll to a location already on the path.   
			</p>
			<p>
				<img src="./sqlserver/sqljdbc-dll/path.JPG" />
			</p>
		</div>
	</body>

</html>



